var imdbRatings = [{ seasonNumber: 1, episodeNumber: 1, mean_rating: 7.33482448793117 },
    { seasonNumber: 1, episodeNumber: 2, mean_rating: 7.34146071886467 },
    { seasonNumber: 1, episodeNumber: 3, mean_rating: 7.36526315789474 },
    { seasonNumber: 1, episodeNumber: 4, mean_rating: 7.37327142478111 },
    { seasonNumber: 1, episodeNumber: 5, mean_rating: 7.3854565688514 },
    { seasonNumber: 1, episodeNumber: 6, mean_rating: 7.39804951237809 },
    { seasonNumber: 1, episodeNumber: 7, mean_rating: 7.39929753356229 },
    { seasonNumber: 1, episodeNumber: 8, mean_rating: 7.42758620689655 },
    { seasonNumber: 1, episodeNumber: 9, mean_rating: 7.44210260042497 },
    { seasonNumber: 1, episodeNumber: 10, mean_rating: 7.45920673845826 },
    { seasonNumber: 2, episodeNumber: 1, mean_rating: 7.48207671957672 },
    { seasonNumber: 2, episodeNumber: 2, mean_rating: 7.44428611738149 },
    { seasonNumber: 2, episodeNumber: 3, mean_rating: 7.43824730242053 },
    { seasonNumber: 2, episodeNumber: 4, mean_rating: 7.43868679245283 },
    { seasonNumber: 2, episodeNumber: 5, mean_rating: 7.4508970727101 },
    { seasonNumber: 2, episodeNumber: 6, mean_rating: 7.46451191642181 },
    { seasonNumber: 2, episodeNumber: 7, mean_rating: 7.45450075642965 },
    { seasonNumber: 2, episodeNumber: 8, mean_rating: 7.49388 },
    { seasonNumber: 2, episodeNumber: 9, mean_rating: 7.4855981416957 },
    { seasonNumber: 2, episodeNumber: 10, mean_rating: 7.51041009463722 },
    { seasonNumber: 3, episodeNumber: 1, mean_rating: 7.51553330228225 },
    { seasonNumber: 3, episodeNumber: 2, mean_rating: 7.45989609104404 },
    { seasonNumber: 3, episodeNumber: 3, mean_rating: 7.47542027508915 },
    { seasonNumber: 3, episodeNumber: 4, mean_rating: 7.47091100026254 },
    { seasonNumber: 3, episodeNumber: 5, mean_rating: 7.46760371179039 },
    { seasonNumber: 3, episodeNumber: 6, mean_rating: 7.49350832627717 },
    { seasonNumber: 3, episodeNumber: 7, mean_rating: 7.46525584333544 },
    { seasonNumber: 3, episodeNumber: 8, mean_rating: 7.49542265285667 },
    { seasonNumber: 3, episodeNumber: 9, mean_rating: 7.50944881889764 },
    { seasonNumber: 3, episodeNumber: 10, mean_rating: 7.5458984375 },
    { seasonNumber: 4, episodeNumber: 1, mean_rating: 7.50592699674738 },
    { seasonNumber: 4, episodeNumber: 2, mean_rating: 7.44512800917081 },
    { seasonNumber: 4, episodeNumber: 3, mean_rating: 7.43332007952286 },
    { seasonNumber: 4, episodeNumber: 4, mean_rating: 7.46156685808039 },
    { seasonNumber: 4, episodeNumber: 5, mean_rating: 7.47015053763441 },
    { seasonNumber: 4, episodeNumber: 6, mean_rating: 7.48559544658494 },
    { seasonNumber: 4, episodeNumber: 7, mean_rating: 7.46313497822932 },
    { seasonNumber: 4, episodeNumber: 8, mean_rating: 7.49493157627978 },
    { seasonNumber: 4, episodeNumber: 9, mean_rating: 7.4757993384785 },
    { seasonNumber: 4, episodeNumber: 10, mean_rating: 7.5153801843318 },
    { seasonNumber: 5, episodeNumber: 1, mean_rating: 7.49106292966684 },
    { seasonNumber: 5, episodeNumber: 2, mean_rating: 7.45345413363533 },
    { seasonNumber: 5, episodeNumber: 3, mean_rating: 7.43268665490888 },
    { seasonNumber: 5, episodeNumber: 4, mean_rating: 7.42898983861327 },
    { seasonNumber: 5, episodeNumber: 5, mean_rating: 7.40852760736196 },
    { seasonNumber: 5, episodeNumber: 6, mean_rating: 7.4391167192429 },
    { seasonNumber: 5, episodeNumber: 7, mean_rating: 7.43795721187026 },
    { seasonNumber: 5, episodeNumber: 8, mean_rating: 7.49040511727079 },
    { seasonNumber: 5, episodeNumber: 9, mean_rating: 7.44968102073365 },
    { seasonNumber: 5, episodeNumber: 10, mean_rating: 7.47408312958435 },
    { seasonNumber: 6, episodeNumber: 1, mean_rating: 7.48021897810219 },
    { seasonNumber: 6, episodeNumber: 2, mean_rating: 7.43911322248614 },
    { seasonNumber: 6, episodeNumber: 3, mean_rating: 7.39114331723027 },
    { seasonNumber: 6, episodeNumber: 4, mean_rating: 7.39401709401709 },
    { seasonNumber: 6, episodeNumber: 5, mean_rating: 7.37646033129904 },
    { seasonNumber: 6, episodeNumber: 6, mean_rating: 7.39954751131222 },
    { seasonNumber: 6, episodeNumber: 7, mean_rating: 7.40775269872424 },
    { seasonNumber: 6, episodeNumber: 8, mean_rating: 7.41203801478353 },
    { seasonNumber: 6, episodeNumber: 9, mean_rating: 7.45454545454545 },
    { seasonNumber: 6, episodeNumber: 10, mean_rating: 7.45111896348645 },
    { seasonNumber: 7, episodeNumber: 1, mean_rating: 7.45397614314115 },
    { seasonNumber: 7, episodeNumber: 2, mean_rating: 7.3826780021254 },
    { seasonNumber: 7, episodeNumber: 3, mean_rating: 7.35174353205849 },
    { seasonNumber: 7, episodeNumber: 4, mean_rating: 7.38650519031142 },
    { seasonNumber: 7, episodeNumber: 5, mean_rating: 7.35592417061611 },
    { seasonNumber: 7, episodeNumber: 6, mean_rating: 7.40230582524272 },
    { seasonNumber: 7, episodeNumber: 7, mean_rating: 7.41705320600273 },
    { seasonNumber: 7, episodeNumber: 8, mean_rating: 7.40429799426934 },
    { seasonNumber: 7, episodeNumber: 9, mean_rating: 7.41577335375191 },
    { seasonNumber: 7, episodeNumber: 10, mean_rating: 7.46749226006192 },
    { seasonNumber: 8, episodeNumber: 1, mean_rating: 7.44396887159533 },
    { seasonNumber: 8, episodeNumber: 2, mean_rating: 7.36338418862691 },
    { seasonNumber: 8, episodeNumber: 3, mean_rating: 7.3665211062591 },
    { seasonNumber: 8, episodeNumber: 4, mean_rating: 7.32923538230885 },
    { seasonNumber: 8, episodeNumber: 5, mean_rating: 7.37548701298701 },
    { seasonNumber: 8, episodeNumber: 6, mean_rating: 7.37996632996633 },
    { seasonNumber: 8, episodeNumber: 7, mean_rating: 7.35985663082437 },
    { seasonNumber: 8, episodeNumber: 8, mean_rating: 7.36228571428571 },
    { seasonNumber: 8, episodeNumber: 9, mean_rating: 7.32157676348548 },
    { seasonNumber: 8, episodeNumber: 10, mean_rating: 7.37855626326964 },
    { seasonNumber: 9, episodeNumber: 1, mean_rating: 7.40329289428076 },
    { seasonNumber: 9, episodeNumber: 2, mean_rating: 7.36415770609319 },
    { seasonNumber: 9, episodeNumber: 3, mean_rating: 7.36840077071291 },
    { seasonNumber: 9, episodeNumber: 4, mean_rating: 7.32015655577299 },
    { seasonNumber: 9, episodeNumber: 5, mean_rating: 7.36341463414634 },
    { seasonNumber: 9, episodeNumber: 6, mean_rating: 7.39344608879493 },
    { seasonNumber: 9, episodeNumber: 7, mean_rating: 7.31255707762557 },
    { seasonNumber: 9, episodeNumber: 8, mean_rating: 7.38377723970944 },
    { seasonNumber: 9, episodeNumber: 9, mean_rating: 7.29366754617414 },
    { seasonNumber: 9, episodeNumber: 10, mean_rating: 7.37115384615385 },
    { seasonNumber: 10, episodeNumber: 1, mean_rating: 7.37521929824561 },
    { seasonNumber: 10, episodeNumber: 2, mean_rating: 7.3014888337469 },
    { seasonNumber: 10, episodeNumber: 3, mean_rating: 7.38298429319372 },
    { seasonNumber: 10, episodeNumber: 4, mean_rating: 7.34763157894737 },
    { seasonNumber: 10, episodeNumber: 5, mean_rating: 7.30609418282548 },
    { seasonNumber: 10, episodeNumber: 6, mean_rating: 7.31305637982196 },
    { seasonNumber: 10, episodeNumber: 7, mean_rating: 7.3373417721519 },
    { seasonNumber: 10, episodeNumber: 8, mean_rating: 7.34418604651163 },
    { seasonNumber: 10, episodeNumber: 9, mean_rating: 7.31469534050179 },
    { seasonNumber: 10, episodeNumber: 10, mean_rating: 7.30075471698113 }]; 



var mainDiv = d3.select("#IMDB");
var mainSvg = mainDiv.append("svg")
mainSvg.attr("height", 600).attr("width", 600);


var scaleSeason = d3.scaleLinear()
    .domain([
        d3.min(imdbRatings, function(d) {return d.seasonNumber}),
        d3.max(imdbRatings, function(d) {return d.seasonNumber})])
    .range([50, 450]);

var scaleEpisode = d3.scaleLinear()
    .domain([
        d3.min(imdbRatings, function(d) {return d.episodeNumber}),
        d3.max(imdbRatings, function(d) {return d.episodeNumber})])
    .range([500, 100]);

var scaleRating = d3.scaleLinear()
    .domain([
        d3.min(imdbRatings, function(d) {return d.mean_rating}),
        d3.max(imdbRatings, function(d) {return d.mean_rating})])
    .range([0, 1]);



mainSvg.selectAll("rect")
    .data(imdbRatings)
    .enter().append("rect")
    .attr("x", function (d) {return scaleSeason(d.seasonNumber)})
    .attr("y", function (d) {return scaleEpisode(d.episodeNumber)})
    .style("fill", function (d) {return d3.interpolateBlues(scaleRating(d.mean_rating))});



mainDiv.selectAll("rect")
    .attr("width", 50)
    .attr("height", 50);



var xAxis = d3.axisBottom().scale(scaleSeason);
mainSvg.append("g")
    .attr("transform", "translate(25, 550)")
    .call(xAxis);

var yAxis = d3.axisLeft().scale(scaleEpisode);
mainSvg.append("g")
    .attr("transform", "translate(50, 25)")
    .call(yAxis);

mainSvg.append("text")
    .attr("x", 225)
    .attr("y", 590)
    .text("Season Number");

mainSvg.append("text")
    .attr("x", -100)
    .attr("y", 260)
    .attr("transform", "rotate(270, 10, 250)")
    .text("Episode Number");

mainSvg.append("text")
    .attr("x", 30)
    .attr("y", 30)
    .style("font-weight", "bold")
    .style("font-size", "20")
    .style("font-family", "Arial, Helvetica, sans-serif")
    .text("Avg IMDB Rating by (Anon) TV Show Season / Episode");



for (let i = 0; i <= 10; i ++) {
    mainSvg.append("rect")
        .attr("x", 525)
        .attr("y", 100 + (i * 25))
        .attr("width", 25)
        .attr("height", 25)
        .style("fill", d3.interpolateBlues(i/10));
}

mainSvg.append("text")
    .attr("x", 555)
    .attr("y", 120)
    .text(d3.min(imdbRatings, function(d) {return Math.round(d.mean_rating * 100) / 100}));
mainSvg.append("text")
    .attr("x", 555)
    .attr("y", 370)
    .text(d3.max(imdbRatings, function(d) {return Math.round(d.mean_rating * 100) / 100}));